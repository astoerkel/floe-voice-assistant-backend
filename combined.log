{"level":"info","message":"Using REDIS_URL from environment","service":"voice-assistant-backend","timestamp":"2025-07-18T20:31:44.453Z"}
{"address":"10.244.122.235","code":"ENETUNREACH","errno":-51,"level":"error","message":"Redis client error: connect ENETUNREACH 10.244.122.235:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ENETUNREACH 10.244.122.235:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:31:48.468Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-18T20:31:48.470Z"}
{"level":"info","message":"Redis client reconnecting...","service":"voice-assistant-backend","timestamp":"2025-07-18T20:31:48.470Z"}
{"address":"10.244.122.235","code":"ENETUNREACH","errno":-51,"level":"error","message":"Redis client error: connect ENETUNREACH 10.244.122.235:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ENETUNREACH 10.244.122.235:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:31:52.533Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-18T20:31:52.534Z"}
{"level":"info","message":"Redis client reconnecting...","service":"voice-assistant-backend","timestamp":"2025-07-18T20:31:52.535Z"}
{"address":"10.244.122.235","code":"ENETUNREACH","errno":-51,"level":"error","message":"Redis client error: connect ENETUNREACH 10.244.122.235:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ENETUNREACH 10.244.122.235:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:31:56.647Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-18T20:31:56.648Z"}
{"level":"info","message":"Redis client reconnecting...","service":"voice-assistant-backend","timestamp":"2025-07-18T20:31:56.648Z"}
{"address":"10.244.122.235","code":"ENETUNREACH","errno":-51,"level":"error","message":"Redis client error: connect ENETUNREACH 10.244.122.235:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ENETUNREACH 10.244.122.235:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:32:00.811Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-18T20:32:00.812Z"}
{"level":"info","message":"Redis client reconnecting...","service":"voice-assistant-backend","timestamp":"2025-07-18T20:32:00.813Z"}
{"level":"error","message":"Failed to connect to Redis: Reached the max retries per request limit (which is 3). Refer to \"maxRetriesPerRequest\" option for details.","service":"voice-assistant-backend","stack":"MaxRetriesPerRequestError: Reached the max retries per request limit (which is 3). Refer to \"maxRetriesPerRequest\" option for details.\n    at Socket.<anonymous> (/Users/amitstorkel/Projects/VoiceAssistantIOS/VoiceAssistant/voice-assistant-backend/node_modules/ioredis/built/redis/event_handler.js:182:37)\n    at Object.onceWrapper (node:events:633:26)\n    at Socket.emit (node:events:518:28)\n    at TCP.<anonymous> (node:net:346:12)","timestamp":"2025-07-18T20:32:00.814Z"}
{"address":"10.244.122.235","code":"ENETUNREACH","errno":-51,"level":"error","message":"Redis client error: connect ENETUNREACH 10.244.122.235:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ENETUNREACH 10.244.122.235:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:32:05.025Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-18T20:32:05.025Z"}
{"level":"info","message":"Redis client reconnecting...","service":"voice-assistant-backend","timestamp":"2025-07-18T20:32:05.025Z"}
{"address":"10.244.122.235","code":"ENETUNREACH","errno":-51,"level":"error","message":"Redis client error: connect ENETUNREACH 10.244.122.235:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ENETUNREACH 10.244.122.235:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:32:09.291Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-18T20:32:09.292Z"}
{"level":"info","message":"Redis client reconnecting...","service":"voice-assistant-backend","timestamp":"2025-07-18T20:32:09.292Z"}
{"address":"10.244.122.235","code":"ENETUNREACH","errno":-51,"level":"error","message":"Redis client error: connect ENETUNREACH 10.244.122.235:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ENETUNREACH 10.244.122.235:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:32:13.607Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-18T20:32:13.607Z"}
{"level":"info","message":"Redis client reconnecting...","service":"voice-assistant-backend","timestamp":"2025-07-18T20:32:13.607Z"}
{"address":"10.244.122.235","code":"ENETUNREACH","errno":-51,"level":"error","message":"Redis client error: connect ENETUNREACH 10.244.122.235:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ENETUNREACH 10.244.122.235:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:32:17.969Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-18T20:32:17.970Z"}
{"level":"info","message":"Redis client reconnecting...","service":"voice-assistant-backend","timestamp":"2025-07-18T20:32:17.970Z"}
{"address":"10.244.122.235","code":"ENETUNREACH","errno":-51,"level":"error","message":"Redis client error: connect ENETUNREACH 10.244.122.235:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ENETUNREACH 10.244.122.235:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:32:22.384Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-18T20:32:22.384Z"}
{"level":"info","message":"Redis client reconnecting...","service":"voice-assistant-backend","timestamp":"2025-07-18T20:32:22.385Z"}
{"address":"10.244.122.235","code":"ENETUNREACH","errno":-51,"level":"error","message":"Redis client error: connect ENETUNREACH 10.244.122.235:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ENETUNREACH 10.244.122.235:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:32:26.849Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-18T20:32:26.850Z"}
{"level":"info","message":"Redis client reconnecting...","service":"voice-assistant-backend","timestamp":"2025-07-18T20:32:26.850Z"}
{"address":"10.244.122.235","code":"ENETUNREACH","errno":-51,"level":"error","message":"Redis client error: connect ENETUNREACH 10.244.122.235:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ENETUNREACH 10.244.122.235:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:32:31.362Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-18T20:32:31.363Z"}
{"level":"info","message":"Redis client reconnecting...","service":"voice-assistant-backend","timestamp":"2025-07-18T20:32:31.363Z"}
{"address":"10.244.122.235","code":"ENETUNREACH","errno":-51,"level":"error","message":"Redis client error: connect ENETUNREACH 10.244.122.235:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ENETUNREACH 10.244.122.235:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:32:35.927Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-18T20:32:35.928Z"}
{"level":"info","message":"Redis client reconnecting...","service":"voice-assistant-backend","timestamp":"2025-07-18T20:32:35.928Z"}
{"address":"10.244.122.235","code":"ENETUNREACH","errno":-51,"level":"error","message":"Redis client error: connect ENETUNREACH 10.244.122.235:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ENETUNREACH 10.244.122.235:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:32:40.553Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-18T20:32:40.553Z"}
{"level":"info","message":"Redis client reconnecting...","service":"voice-assistant-backend","timestamp":"2025-07-18T20:32:40.553Z"}
{"address":"10.244.122.235","code":"ENETUNREACH","errno":-51,"level":"error","message":"Redis client error: connect ENETUNREACH 10.244.122.235:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ENETUNREACH 10.244.122.235:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:32:45.255Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-18T20:32:45.256Z"}
{"level":"info","message":"Redis client reconnecting...","service":"voice-assistant-backend","timestamp":"2025-07-18T20:32:45.257Z"}
{"address":"10.244.122.235","code":"ENETUNREACH","errno":-51,"level":"error","message":"Redis client error: connect ENETUNREACH 10.244.122.235:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ENETUNREACH 10.244.122.235:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:32:49.969Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-18T20:32:49.970Z"}
{"level":"info","message":"Redis client reconnecting...","service":"voice-assistant-backend","timestamp":"2025-07-18T20:32:49.970Z"}
{"address":"10.244.122.235","code":"ENETUNREACH","errno":-51,"level":"error","message":"Redis client error: connect ENETUNREACH 10.244.122.235:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ENETUNREACH 10.244.122.235:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:32:54.734Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-18T20:32:54.734Z"}
{"level":"info","message":"Redis client reconnecting...","service":"voice-assistant-backend","timestamp":"2025-07-18T20:32:54.734Z"}
{"address":"10.244.122.235","code":"ENETUNREACH","errno":-51,"level":"error","message":"Redis client error: connect ENETUNREACH 10.244.122.235:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ENETUNREACH 10.244.122.235:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:32:59.572Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-18T20:32:59.572Z"}
{"level":"info","message":"Redis client reconnecting...","service":"voice-assistant-backend","timestamp":"2025-07-18T20:32:59.572Z"}
{"address":"10.244.122.235","code":"ENETUNREACH","errno":-51,"level":"error","message":"Redis client error: connect ENETUNREACH 10.244.122.235:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ENETUNREACH 10.244.122.235:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:33:04.441Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-18T20:33:04.441Z"}
{"level":"info","message":"Redis client reconnecting...","service":"voice-assistant-backend","timestamp":"2025-07-18T20:33:04.441Z"}
{"address":"10.244.122.235","code":"ENETUNREACH","errno":-51,"level":"error","message":"Redis client error: connect ENETUNREACH 10.244.122.235:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ENETUNREACH 10.244.122.235:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:33:09.352Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-18T20:33:09.352Z"}
{"level":"info","message":"Redis client reconnecting...","service":"voice-assistant-backend","timestamp":"2025-07-18T20:33:09.352Z"}
{"address":"10.244.122.235","code":"ENETUNREACH","errno":-51,"level":"error","message":"Redis client error: connect ENETUNREACH 10.244.122.235:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ENETUNREACH 10.244.122.235:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:33:14.315Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-18T20:33:14.315Z"}
{"level":"info","message":"Redis client reconnecting...","service":"voice-assistant-backend","timestamp":"2025-07-18T20:33:14.315Z"}
{"address":"10.244.122.235","code":"ENETUNREACH","errno":-51,"level":"error","message":"Redis client error: connect ENETUNREACH 10.244.122.235:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ENETUNREACH 10.244.122.235:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:33:19.331Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-18T20:33:19.331Z"}
{"level":"info","message":"Redis client reconnecting...","service":"voice-assistant-backend","timestamp":"2025-07-18T20:33:19.331Z"}
{"address":"10.244.122.235","code":"ENETUNREACH","errno":-51,"level":"error","message":"Redis client error: connect ENETUNREACH 10.244.122.235:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ENETUNREACH 10.244.122.235:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:33:24.393Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-18T20:33:24.394Z"}
{"level":"info","message":"Redis client reconnecting...","service":"voice-assistant-backend","timestamp":"2025-07-18T20:33:24.394Z"}
{"NODE_ENV":"development","REDIS_HOST":"not set","REDIS_PORT":"not set","REDIS_URL":"not set","level":"info","message":"Redis environment variables:","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:17.167Z"}
{"level":"info","message":"Using development Redis configuration","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:17.168Z"}
{"level":"info","message":"Attempting Redis connection with config:","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:17.169Z","type":"development","url":"redis://localhost:6379"}
{"address":"127.0.0.1","code":"ECONNREFUSED","errno":-61,"level":"error","message":"Redis error: connect ECONNREFUSED 127.0.0.1:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:36:17.174Z"}
{"level":"info","message":"Retrying Redis connection in 100ms...","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:17.174Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:17.174Z"}
{"address":"127.0.0.1","code":"ECONNREFUSED","errno":-61,"level":"error","message":"Redis error: connect ECONNREFUSED 127.0.0.1:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:36:17.276Z"}
{"level":"info","message":"Retrying Redis connection in 200ms...","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:17.277Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:17.277Z"}
{"address":"127.0.0.1","code":"ECONNREFUSED","errno":-61,"level":"error","message":"Redis error: connect ECONNREFUSED 127.0.0.1:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:36:17.479Z"}
{"level":"info","message":"Retrying Redis connection in 300ms...","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:17.480Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:17.480Z"}
{"address":"127.0.0.1","code":"ECONNREFUSED","errno":-61,"level":"error","message":"Redis error: connect ECONNREFUSED 127.0.0.1:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:36:17.784Z"}
{"level":"error","message":"Redis connection failed after 3 retries","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:17.784Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:17.785Z"}
{"level":"error","message":"Failed to connect to Redis: Connection is closed.","service":"voice-assistant-backend","stack":"Error: Connection is closed.\n    at close (/Users/amitstorkel/Projects/VoiceAssistantIOS/VoiceAssistant/voice-assistant-backend/node_modules/ioredis/built/redis/event_handler.js:189:25)\n    at Socket.<anonymous> (/Users/amitstorkel/Projects/VoiceAssistantIOS/VoiceAssistant/voice-assistant-backend/node_modules/ioredis/built/redis/event_handler.js:165:20)\n    at Object.onceWrapper (node:events:633:26)\n    at Socket.emit (node:events:518:28)\n    at TCP.<anonymous> (node:net:346:12)","timestamp":"2025-07-18T20:36:17.785Z"}
{"level":"warn","message":"Using mock Redis client for development","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:17.785Z"}
{"NODE_ENV":"production","REDIS_HOST":"not set","REDIS_PORT":"not set","REDIS_URL":"set","level":"info","message":"Redis environment variables:","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:17.786Z"}
{"level":"info","message":"Using REDIS_URL from environment variable","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:17.786Z"}
{"level":"info","message":"Attempting Redis connection with config:","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:17.787Z","type":"url","url":"redis://10.244.122.235:6379"}
{"address":"10.244.122.235","code":"ENETUNREACH","errno":-51,"level":"error","message":"Redis error: connect ENETUNREACH 10.244.122.235:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ENETUNREACH 10.244.122.235:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:36:21.800Z"}
{"level":"info","message":"Retrying Redis connection in 100ms...","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:21.801Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:21.801Z"}
{"address":"10.244.122.235","code":"ENETUNREACH","errno":-51,"level":"error","message":"Redis error: connect ENETUNREACH 10.244.122.235:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ENETUNREACH 10.244.122.235:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:36:25.925Z"}
{"level":"info","message":"Retrying Redis connection in 200ms...","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:25.925Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:25.926Z"}
{"address":"10.244.122.235","code":"ENETUNREACH","errno":-51,"level":"error","message":"Redis error: connect ENETUNREACH 10.244.122.235:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ENETUNREACH 10.244.122.235:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:36:30.142Z"}
{"level":"info","message":"Retrying Redis connection in 300ms...","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:30.142Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:30.143Z"}
{"address":"10.244.122.235","code":"ENETUNREACH","errno":-51,"level":"error","message":"Redis error: connect ENETUNREACH 10.244.122.235:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ENETUNREACH 10.244.122.235:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:36:34.458Z"}
{"level":"error","message":"Redis connection failed after 3 retries","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:34.458Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:34.459Z"}
{"level":"error","message":"Failed to connect to Redis: Connection is closed.","service":"voice-assistant-backend","stack":"Error: Connection is closed.\n    at close (/Users/amitstorkel/Projects/VoiceAssistantIOS/VoiceAssistant/voice-assistant-backend/node_modules/ioredis/built/redis/event_handler.js:189:25)\n    at Socket.<anonymous> (/Users/amitstorkel/Projects/VoiceAssistantIOS/VoiceAssistant/voice-assistant-backend/node_modules/ioredis/built/redis/event_handler.js:165:20)\n    at Object.onceWrapper (node:events:633:26)\n    at Socket.emit (node:events:518:28)\n    at TCP.<anonymous> (node:net:346:12)","timestamp":"2025-07-18T20:36:34.459Z"}
{"level":"error","message":"Redis connection failed in production - attempting fallback to mock client","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:34.459Z"}
{"level":"warn","message":"Using mock Redis client in production - OAuth features will be limited","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:34.459Z"}
{"NODE_ENV":"production","REDIS_HOST":"10.244.122.235","REDIS_PORT":"6379","REDIS_URL":"not set","level":"info","message":"Redis environment variables:","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:34.459Z"}
{"level":"info","message":"Using production Redis URL: redis://10.244.122.235:6379","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:34.459Z"}
{"level":"info","message":"Attempting Redis connection with config:","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:34.459Z","type":"constructed","url":"redis://10.244.122.235:6379"}
{"address":"10.244.122.235","code":"ENETUNREACH","errno":-51,"level":"error","message":"Redis error: connect ENETUNREACH 10.244.122.235:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ENETUNREACH 10.244.122.235:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:36:38.471Z"}
{"level":"info","message":"Retrying Redis connection in 100ms...","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:38.472Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:38.472Z"}
{"address":"10.244.122.235","code":"ENETUNREACH","errno":-51,"level":"error","message":"Redis error: connect ENETUNREACH 10.244.122.235:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ENETUNREACH 10.244.122.235:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:36:42.585Z"}
{"level":"info","message":"Retrying Redis connection in 200ms...","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:42.586Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:42.586Z"}
{"address":"10.244.122.235","code":"ENETUNREACH","errno":-51,"level":"error","message":"Redis error: connect ENETUNREACH 10.244.122.235:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ENETUNREACH 10.244.122.235:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:36:46.799Z"}
{"level":"info","message":"Retrying Redis connection in 300ms...","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:46.799Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-18T20:36:46.800Z"}
{"address":"10.244.122.235","code":"ENETUNREACH","errno":-51,"level":"error","message":"Redis error: connect ENETUNREACH 10.244.122.235:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ENETUNREACH 10.244.122.235:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-18T20:36:51.113Z"}
{"level":"info","message":"Minimal server started successfully","service":"voice-assistant-backend","timestamp":"2025-07-19T06:54:10.073Z"}
{"NODE_ENV":"development","REDIS_HOST":"not set","REDIS_PORT":"not set","REDIS_URL":"not set","level":"info","message":"Redis environment variables:","service":"voice-assistant-backend","timestamp":"2025-07-19T06:58:44.677Z"}
{"level":"info","message":"Using development Redis configuration","service":"voice-assistant-backend","timestamp":"2025-07-19T06:58:44.678Z"}
{"level":"info","message":"Attempting Redis connection with config:","service":"voice-assistant-backend","timestamp":"2025-07-19T06:58:44.678Z","type":"development","url":"redis://localhost:6379"}
{"level":"info","message":"Loading routes...","service":"voice-assistant-backend","timestamp":"2025-07-19T06:58:44.680Z"}
{"level":"info","message":"Auth routes loaded","service":"voice-assistant-backend","timestamp":"2025-07-19T06:58:44.743Z"}
{"level":"error","message":"Failed to load routes: OpenAI or Azure OpenAI API key not found","service":"voice-assistant-backend","stack":"Error: OpenAI or Azure OpenAI API key not found\n    at new ChatOpenAI (/Users/amitstorkel/Projects/VoiceAssistantIOS/VoiceAssistant/voice-assistant-backend/node_modules/@langchain/openai/dist/chat_models.cjs:342:19)\n    at new LangChainService (/Users/amitstorkel/Projects/VoiceAssistantIOS/VoiceAssistant/voice-assistant-backend/src/services/ai/langchain.js:11:22)\n    at Object.<anonymous> (/Users/amitstorkel/Projects/VoiceAssistantIOS/VoiceAssistant/voice-assistant-backend/src/services/ai/langchain.js:269:18)\n    at Module._compile (node:internal/modules/cjs/loader:1730:14)\n    at Object..js (node:internal/modules/cjs/loader:1895:10)\n    at Module.load (node:internal/modules/cjs/loader:1465:32)\n    at Function._load (node:internal/modules/cjs/loader:1282:12)\n    at TracingChannel.traceSync (node:diagnostics_channel:322:14)\n    at wrapModuleLoad (node:internal/modules/cjs/loader:235:24)\n    at Module.require (node:internal/modules/cjs/loader:1487:12)","timestamp":"2025-07-19T06:58:44.946Z"}
{"level":"error","message":"Stack trace:","service":"voice-assistant-backend","timestamp":"2025-07-19T06:58:44.946Z"}
{"level":"info","message":"Routes registered","service":"voice-assistant-backend","timestamp":"2025-07-19T06:58:44.947Z"}
{"level":"error","message":"Failed to initialize WebSocket: OpenAI or Azure OpenAI API key not found","service":"voice-assistant-backend","stack":"Error: OpenAI or Azure OpenAI API key not found\n    at new ChatOpenAI (/Users/amitstorkel/Projects/VoiceAssistantIOS/VoiceAssistant/voice-assistant-backend/node_modules/@langchain/openai/dist/chat_models.cjs:342:19)\n    at new LangChainService (/Users/amitstorkel/Projects/VoiceAssistantIOS/VoiceAssistant/voice-assistant-backend/src/services/ai/langchain.js:11:22)\n    at Object.<anonymous> (/Users/amitstorkel/Projects/VoiceAssistantIOS/VoiceAssistant/voice-assistant-backend/src/services/ai/langchain.js:269:18)\n    at Module._compile (node:internal/modules/cjs/loader:1730:14)\n    at Object..js (node:internal/modules/cjs/loader:1895:10)\n    at Module.load (node:internal/modules/cjs/loader:1465:32)\n    at Function._load (node:internal/modules/cjs/loader:1282:12)\n    at TracingChannel.traceSync (node:diagnostics_channel:322:14)\n    at wrapModuleLoad (node:internal/modules/cjs/loader:235:24)\n    at Module.require (node:internal/modules/cjs/loader:1487:12)","timestamp":"2025-07-19T06:58:44.947Z"}
{"level":"info","message":"Voice Assistant Backend running on port 3000","service":"voice-assistant-backend","timestamp":"2025-07-19T06:58:44.951Z"}
{"level":"info","message":"Environment: development","service":"voice-assistant-backend","timestamp":"2025-07-19T06:58:44.951Z"}
{"level":"info","message":"Registered routes:","service":"voice-assistant-backend","timestamp":"2025-07-19T06:58:44.951Z"}
{"level":"info","message":"  GET /health","service":"voice-assistant-backend","timestamp":"2025-07-19T06:58:44.951Z"}
{"level":"info","message":"  Router: /^\\/api\\/auth\\/?(?=\\/|$)/i","service":"voice-assistant-backend","timestamp":"2025-07-19T06:58:44.951Z"}
{"address":"127.0.0.1","code":"ECONNREFUSED","errno":-61,"level":"error","message":"Redis error: connect ECONNREFUSED 127.0.0.1:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-19T06:58:44.970Z"}
{"level":"info","message":"Retrying Redis connection in 100ms...","service":"voice-assistant-backend","timestamp":"2025-07-19T06:58:44.970Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-19T06:58:44.970Z"}
{"level":"error","message":"Failed to connect to database (5 retries left):","service":"voice-assistant-backend","timestamp":"2025-07-19T06:58:44.977Z"}
{"level":"info","message":"Retrying database connection in 5 seconds...","service":"voice-assistant-backend","timestamp":"2025-07-19T06:58:44.977Z"}
{"address":"127.0.0.1","code":"ECONNREFUSED","errno":-61,"level":"error","message":"Redis error: connect ECONNREFUSED 127.0.0.1:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-19T06:58:45.072Z"}
{"level":"info","message":"Retrying Redis connection in 200ms...","service":"voice-assistant-backend","timestamp":"2025-07-19T06:58:45.073Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-19T06:58:45.073Z"}
{"address":"127.0.0.1","code":"ECONNREFUSED","errno":-61,"level":"error","message":"Redis error: connect ECONNREFUSED 127.0.0.1:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-19T06:58:45.276Z"}
{"level":"info","message":"Retrying Redis connection in 300ms...","service":"voice-assistant-backend","timestamp":"2025-07-19T06:58:45.277Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-19T06:58:45.277Z"}
{"address":"127.0.0.1","code":"ECONNREFUSED","errno":-61,"level":"error","message":"Redis error: connect ECONNREFUSED 127.0.0.1:6379","port":6379,"service":"voice-assistant-backend","stack":"Error: connect ECONNREFUSED 127.0.0.1:6379\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)","syscall":"connect","timestamp":"2025-07-19T06:58:45.581Z"}
{"level":"error","message":"Redis connection failed after 3 retries","service":"voice-assistant-backend","timestamp":"2025-07-19T06:58:45.582Z"}
{"level":"warn","message":"Redis connection closed","service":"voice-assistant-backend","timestamp":"2025-07-19T06:58:45.583Z"}
{"level":"error","message":"Failed to connect to Redis: Connection is closed.","service":"voice-assistant-backend","stack":"Error: Connection is closed.\n    at close (/Users/amitstorkel/Projects/VoiceAssistantIOS/VoiceAssistant/voice-assistant-backend/node_modules/ioredis/built/redis/event_handler.js:189:25)\n    at Socket.<anonymous> (/Users/amitstorkel/Projects/VoiceAssistantIOS/VoiceAssistant/voice-assistant-backend/node_modules/ioredis/built/redis/event_handler.js:165:20)\n    at Object.onceWrapper (node:events:633:26)\n    at Socket.emit (node:events:518:28)\n    at TCP.<anonymous> (node:net:346:12)","timestamp":"2025-07-19T06:58:45.583Z"}
{"level":"warn","message":"Using mock Redis client for development","service":"voice-assistant-backend","timestamp":"2025-07-19T06:58:45.583Z"}
{"level":"error","message":"Failed to connect to database (4 retries left):","service":"voice-assistant-backend","timestamp":"2025-07-19T06:58:49.981Z"}
{"level":"info","message":"Retrying database connection in 5 seconds...","service":"voice-assistant-backend","timestamp":"2025-07-19T06:58:49.981Z"}
{"level":"error","message":"Failed to connect to database (3 retries left):","service":"voice-assistant-backend","timestamp":"2025-07-19T06:58:54.984Z"}
{"level":"info","message":"Retrying database connection in 5 seconds...","service":"voice-assistant-backend","timestamp":"2025-07-19T06:58:54.984Z"}
{"level":"error","message":"Failed to connect to database (2 retries left):","service":"voice-assistant-backend","timestamp":"2025-07-19T06:58:59.987Z"}
{"level":"info","message":"Retrying database connection in 5 seconds...","service":"voice-assistant-backend","timestamp":"2025-07-19T06:58:59.988Z"}
{"level":"warn","message":"404 - Route not found: POST /api/oauth/public/google/init","service":"voice-assistant-backend","timestamp":"2025-07-19T06:59:03.558Z"}
{"level":"info","message":"::1 - - [19/Jul/2025:06:59:03 +0000] \"POST /api/oauth/public/google/init HTTP/1.1\" 404 27 \"-\" \"curl/8.7.1\"","service":"voice-assistant-backend","timestamp":"2025-07-19T06:59:03.560Z"}
{"level":"error","message":"Failed to connect to database (1 retries left):","service":"voice-assistant-backend","timestamp":"2025-07-19T06:59:04.989Z"}
{"level":"error","message":"Failed to connect to database after all retries","service":"voice-assistant-backend","timestamp":"2025-07-19T06:59:04.990Z"}
